@model BlogSimple.Model.ViewModels.AccountViewModels.MyAccountViewModel;

@{
    ViewData["Title"] = "Delete Account";
    Layout = "~/Views/Account/_DashboardAccountLayout.cshtml";
}

<div class="m-5">
    <h1 class="text-left mt-5">Delete Account</h1>

    <br />
    <br />

    <div>
        <div class="text-left">
            <h4>Delete Account</h4>
            <hr />
            <div class="row">
                <p>Are you sure you would like to delete your account? This will delete all your blog posts and comments posted within BlogSimple.</p>
                <div class="col-sm-4">
                    <div>
                        <a class="btn btn-danger" onclick="displayDeleteAccountModal('@Model.AccountUser.Id')">Delete Account</a>
                    </div>
                </div>
            </div>
            <br />
            <br />
        </div>
    </div>
</div>

<!-- Delete Account Modal -->
<div id="deleteAccountModal" class="delete-account-modal">
    <span onclick="hideDeleteAccountModal()" class="close" title="Close Modal">&times;</span>
    <form class="modal-content" id="deleteAccountModalForm" method="post">
        <div class="modal-content-container">
            <h1>Delete Account</h1>
            <p>Are you sure you want to delete your account permanently?</p>

            <div class="modal-buttons">
                <button class="hero-btn" type="button" onclick="hideDeleteAccountModal()">Cancel</button>
                <button id="accountDeleteBtn" class="hero-btn" type="submit">Delete</button>
            </div>
        </div>
    </form>
</div>



<script src="~/js/deleteAccount.js" asp-append-version="true"></script>
<script>
    const accountDeleteBtn = document.querySelector('#accountDeleteBtn');

    accountDeleteBtn.addEventListener('click', (e) => {
        setTimeout(() => {
            accountDeleteBtn.disabled = true;
            accountDeleteBtn.innerHTML = "Loading...";
        }, 50);
    });
</script>